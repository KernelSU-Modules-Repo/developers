# KernelSU Developers Keyring Management

åŸºäº X.509 PKI çš„å¼€å‘è€…èº«ä»½è®¤è¯ç³»ç»Ÿï¼Œé‡‡ç”¨ä¸‰çº§ CA æ¶æ„å’Œè‡ªåŠ¨å®¡æ ¸æœºåˆ¶ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
developers/
â”œâ”€â”€ index.js            # ä¸»å…¥å£æ–‡ä»¶ï¼Œå¤„ç† GitHub Actions äº‹ä»¶
â”œâ”€â”€ keyring.js          # X.509 è¯ä¹¦ç­¾å‘æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ rank.js             # GitHub å¼€å‘è€…è¯„åˆ†ç®—æ³•ï¼ˆè‡ªåŠ¨å®¡æ ¸ï¼‰
â”œâ”€â”€ github-utils.js     # GitHub API å°è£…å·¥å…·å‡½æ•°
â”œâ”€â”€ utils.js            # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ module_integrity.md # X.509 PKI è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ AUTO_REVIEW.md      # è‡ªåŠ¨å®¡æ ¸æœºåˆ¶è¯¦ç»†è¯´æ˜
â””â”€â”€ website/            # å¼€å‘è€…é—¨æˆ·ç½‘ç«™ï¼ˆNext.jsï¼‰
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/keyring-app.tsx  # è¯ä¹¦ç®¡ç† UI
    â”‚   â””â”€â”€ lib/locales.ts              # å›½é™…åŒ–ï¼ˆä¸­è‹±åŒè¯­ï¼‰
    â””â”€â”€ package.json
```

## ğŸ“‹ æ–‡ä»¶è¯´æ˜

### index.js
- **èŒè´£**: GitHub Actions ä¸»å…¥å£
- **åŠŸèƒ½**:
  - ç›‘å¬ issue çš„ `labeled` å’Œ `opened` äº‹ä»¶
  - å¤„ç† spam æ ‡è®°å’Œå…³é—­
  - è°ƒç”¨ keyring å¤„ç†æµç¨‹

### keyring.js
- **èŒè´£**: X.509 è¯ä¹¦ç­¾å‘å’Œç®¡ç†
- **åŠŸèƒ½**:
  - ä»ç¯å¢ƒå˜é‡åŠ è½½ Middle CA è¯ä¹¦å’Œç§é’¥
  - ä» CSR ç­¾å‘å¼€å‘è€…è¯ä¹¦
  - ä» issue ä¸­æå– CSR
  - è‡ªåŠ¨è¯„ä¼°å¼€å‘è€…å¹¶é‡‡å–ç›¸åº”æ“ä½œ
  - å¤„ç†å®Œæ•´çš„ keyring issue æµç¨‹

### rank.js â­ æ–°å¢
- **èŒè´£**: GitHub å¼€å‘è€…è¯„åˆ†å’Œè‡ªåŠ¨å®¡æ ¸
- **åŠŸèƒ½**:
  - åŸºäº GitHub Readme Stats ç®—æ³•è®¡ç®—å¼€å‘è€…ç­‰çº§
  - ä» GitHub API è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
  - è¯„ä¼°ç”¨æˆ·æ˜¯å¦ç¬¦åˆè‡ªåŠ¨æ‰¹å‡†/æ‹’ç»æ¡ä»¶
  - ç”Ÿæˆè¯¦ç»†çš„è¯„ä¼°æŠ¥å‘Š

### github-utils.js
- **èŒè´£**: GitHub API å°è£…
- **åŠŸèƒ½**:
  - Issue æ“ä½œï¼ˆè·å–ã€å…³é—­ã€é”å®šï¼‰
  - Label æ“ä½œï¼ˆè®¾ç½®ã€æ·»åŠ ã€ç§»é™¤ï¼‰
  - Comment æ“ä½œï¼ˆåˆ›å»ºè¯„è®ºï¼‰
  - ç»„ç»‡æ“ä½œï¼ˆå±è”½ç”¨æˆ·ï¼‰

### utils.js
- **èŒè´£**: é€šç”¨å·¥å…·å‡½æ•°
- **åŠŸèƒ½**:
  - è¯†åˆ«å’Œè§£æ issue æ ‡é¢˜æ ‡ç­¾

## ğŸ” PKI æ¶æ„

### ä¸‰çº§ CA ä¿¡ä»»é“¾

```
Root CA (ç¦»çº¿ä¿å­˜ï¼Œ20å¹´æœ‰æ•ˆæœŸ)
    â†“ ç­¾å‘
Middle CA / Signer (GitHub Secretsï¼Œ10å¹´æœ‰æ•ˆæœŸ)
    â†“ ç­¾å‘
å¼€å‘è€…è¯ä¹¦ (1å¹´æœ‰æ•ˆæœŸï¼ŒCode Signing)
    â†“ ç­¾å
æ¨¡å— ZIP
```

### è¯ä¹¦è§„æ ¼

| è¯ä¹¦ç±»å‹ | Subject | ç®—æ³• | æœ‰æ•ˆæœŸ | ç”¨é€” |
|---------|---------|------|--------|------|
| **Root CA** | CN=KernelSU Root CA P-384 | ECC P-384 | 20å¹´ | ç­¾å‘ Middle CA |
| **Middle CA** | CN=KernelSU Signer P-384 | ECC P-384 | 10å¹´ | ç­¾å‘å¼€å‘è€…è¯ä¹¦ |
| **å¼€å‘è€…è¯ä¹¦** | CN={GitHubç”¨æˆ·å} | RSA 2048 | 1å¹´ | ä»£ç ç­¾å |

## ğŸ¤– è‡ªåŠ¨å®¡æ ¸æœºåˆ¶

### è¯„åˆ†æ ‡å‡†

ç³»ç»ŸåŸºäºå¼€å‘è€…çš„ GitHub æ´»åŠ¨æ•°æ®è‡ªåŠ¨è®¡ç®—è¯„åˆ†ï¼š

| æŒ‡æ ‡ | æƒé‡ | MEDIAN å€¼ |
|------|------|-----------|
| â­ **Stars** | **4** | 50 |
| ğŸ”€ **Pull Requests** | 3 | 50 |
| ğŸ’» **Commits** | 2 | 250 |
| ğŸ› **Issues** | 1 | 25 |
| ğŸ‘€ **Code Reviews** | 1 | 2 |
| ğŸ‘¥ **Followers** | 1 | 10 |

### å®¡æ ¸è§„åˆ™

| ç­‰çº§èŒƒå›´ | ç™¾åˆ†ä½ | æ“ä½œ | è¯´æ˜ |
|---------|--------|------|------|
| ğŸŸ¢ **S, A+, A** | â‰¤ 25% | **è‡ªåŠ¨æ‰¹å‡†** | Top 25% å¼€å‘è€…ï¼Œç«‹å³ç­¾å‘è¯ä¹¦ |
| ğŸŸ¡ **A-, B+, B, B-** | 25% - 75% | **äººå·¥å®¡æ ¸** | ç­‰å¾…æ ¸å¿ƒå¼€å‘è€…æ‰‹åŠ¨å®¡æ ¸ |
| ğŸ”´ **C+, C** | > 75% | **è‡ªåŠ¨æ‹’ç»** | éœ€æå‡ GitHub è´¡çŒ®åé‡æ–°ç”³è¯· |

> ğŸ“– **è¯¦ç»†è¯´æ˜**: å‚è§ [AUTO_REVIEW.md](AUTO_REVIEW.md)

## ğŸ”‘ ç¯å¢ƒå˜é‡

### GitHub Secrets é…ç½®

- `MIDDLE_CA_CERT` - Middle CA è¯ä¹¦ï¼ˆPEM æ ¼å¼ï¼Œå¿…éœ€ï¼‰
- `MIDDLE_CA_KEY` - Middle CA ç§é’¥ï¼ˆPEM æ ¼å¼ï¼Œå¿…éœ€ï¼‰
- `GITHUB_TOKEN` - GitHub API ä»¤ç‰Œï¼ˆè‡ªåŠ¨æä¾›ï¼‰

> âš ï¸ **å®‰å…¨æç¤º**: Root CA ç§é’¥åº”ç¦»çº¿ä¿å­˜ï¼Œæ°¸ä¸ä¸Šä¼ åˆ°äº‘ç«¯

## ğŸ·ï¸ æ”¯æŒçš„ Issue æ ‡ç­¾

- `[keyring]` - å¼€å‘è€…è¯ä¹¦ç”³è¯·ï¼ˆæäº¤ CSRï¼‰
- `[revoke]` - è¯ä¹¦åŠé”€è¯·æ±‚
- `[appeal]` - ç”³è¯‰
- `[issue]` - é—®é¢˜åé¦ˆ
- `[suggestion]` - å»ºè®®

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### 1ï¸âƒ£ å¼€å‘è€…ç”³è¯·è¯ä¹¦

1. è®¿é—® [Developer Portal](https://kernelsu-modules-repo.github.io/developers/)
2. åœ¨ "Generate" æ ‡ç­¾é¡µç”Ÿæˆç§é’¥å’Œ CSR
3. ä¸‹è½½ `username.key.pem`ï¼ˆç§é’¥ï¼Œä¿å¯†ï¼‰å’Œ `username.csr.pem`ï¼ˆCSRï¼‰
4. åˆ›å»º `[keyring] username` issueï¼Œç²˜è´´ CSR å†…å®¹

### 2ï¸âƒ£ è‡ªåŠ¨è¯„ä¼°

ç³»ç»Ÿè‡ªåŠ¨ï¼š
1. ä» GitHub API è·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
2. è®¡ç®—å¼€å‘è€…ç­‰çº§ï¼ˆS - Cï¼‰
3. å‘å¸ƒè¯¦ç»†è¯„ä¼°æŠ¥å‘Š
4. æ ¹æ®ç­‰çº§é‡‡å–è¡ŒåŠ¨ï¼š
   - **Top 25%**: è‡ªåŠ¨æ·»åŠ  `approved` æ ‡ç­¾
   - **ä½äº 75%**: æ·»åŠ  `rejected` æ ‡ç­¾å¹¶å…³é—­ issue
   - **ä¸­é—´èŒƒå›´**: ç­‰å¾…äººå·¥å®¡æ ¸

### 3ï¸âƒ£ è¯ä¹¦ç­¾å‘ï¼ˆè‡ªåŠ¨æ‰¹å‡†åï¼‰

1. GitHub Actions æ£€æµ‹åˆ° `approved` æ ‡ç­¾
2. ä½¿ç”¨ Middle CA ç­¾å‘å¼€å‘è€…è¯ä¹¦
3. åœ¨ issue è¯„è®ºä¸­è¿”å›è¯ä¹¦ï¼ˆ`.cert.pem`ï¼‰
4. è‡ªåŠ¨å…³é—­ issue

### 4ï¸âƒ£ ä½¿ç”¨è¯ä¹¦ç­¾åæ¨¡å—

```bash
# 1. ä¿å­˜è¯ä¹¦
# ä¸‹è½½ issue ä¸­çš„è¯ä¹¦å¹¶ä¿å­˜ä¸º username.cert.pem

# 2. ç”Ÿæˆæ¨¡å—æ–‡ä»¶æ¸…å•
find . -type f ! -path './META-INF/*' -print0 | \
  sort -z | xargs -0 sha256sum > META-INF/ksu/MANIFEST

# 3. ä½¿ç”¨ç§é’¥ç­¾å
openssl dgst -sha256 -sign username.key.pem \
  -out META-INF/ksu/MANIFEST.sig META-INF/ksu/MANIFEST

# 4. æ‰“åŒ…è¯ä¹¦é“¾
cp username.cert.pem META-INF/ksu/CERT
cp middle_ca.cert.pem META-INF/ksu/CHAIN.pem
```

## ğŸ“Š è¯„ä¼°æŠ¥å‘Šç¤ºä¾‹

```markdown
## Developer Evaluation Report

**User**: @username (Real Name)
**Account Created**: 2020-01-15

### GitHub Statistics

| Metric | Value | Weight | Median |
|--------|-------|--------|--------|
| ğŸ’» Commits | 520 | 2 | 250 |
| ğŸ”€ Pull Requests | 85 | 3 | 50 |
| ğŸ› Issues | 42 | 1 | 25 |
| ğŸ‘€ Code Reviews | 15 | 1 | 2 |
| â­ Stars | 320 | 4 | 50 |
| ğŸ‘¥ Followers | 28 | 1 | 10 |

### Ranking Result

- **Level**: `A`
- **Percentile**: `18.5%` (Top 18.5%)
- **Score**: `9.76/12`

### Decision

**Action**: `auto_approve`
**Reason**: Top 18.5% developer (Rank: A)
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### é˜²åˆ·æ¦œè®¾è®¡

- âœ… **Stars æƒé‡æœ€é«˜ï¼ˆ33.3%ï¼‰**: æ— æ³•ä»…é€šè¿‡åˆ· commits è·å¾—é«˜åˆ†
- âœ… **å¤šç»´åº¦è¯„ä¼°**: ç»¼åˆ 6 é¡¹ GitHub æ´»åŠ¨æŒ‡æ ‡
- âœ… **ç»Ÿè®¡å­¦æ–¹æ³•**: ä½¿ç”¨æ¦‚ç‡åˆ†å¸ƒå½’ä¸€åŒ–ï¼Œç§‘å­¦å…¬å¹³

### è¯ä¹¦åŠé”€

ä½¿ç”¨ CRLï¼ˆè¯ä¹¦åŠé”€åˆ—è¡¨ï¼‰æœºåˆ¶ï¼š

```
keyring/
â”œâ”€â”€ crl.pem  # è¯ä¹¦åŠé”€åˆ—è¡¨ï¼ˆMiddle CA ç­¾å‘ï¼‰
```

## ğŸŒ å¼€å‘è€…é—¨æˆ·

è®¿é—® [https://kernelsu-modules-repo.github.io/developers/](https://kernelsu-modules-repo.github.io/developers/) è¿›è¡Œï¼š

- ğŸ”‘ ç”Ÿæˆç§é’¥å’Œ CSR
- ğŸ“¤ æäº¤ CSR åˆ° GitHub Issue
- ğŸ” æŸ¥è¯¢è¯ä¹¦çŠ¶æ€
- ğŸš« ç”³è¯·åŠé”€è¯ä¹¦

æ”¯æŒä¸­è‹±åŒè¯­ç•Œé¢ã€‚

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [X.509 PKI è®¾è®¡æ–‡æ¡£](module_integrity.md) - å®Œæ•´çš„ä¸‰çº§ CA æ¶æ„è®¾è®¡
- [è‡ªåŠ¨å®¡æ ¸æœºåˆ¶è¯¦è§£](AUTO_REVIEW.md) - è¯„åˆ†ç®—æ³•å’Œè§„åˆ™è¯´æ˜
- [GitHub Readme Stats](https://github.com/anuraghazra/github-readme-stats) - è¯„åˆ†ç®—æ³•æ¥æº

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯ï¼ˆGitHub Actionsï¼‰
- Node.js
- `node-forge` - X.509 è¯ä¹¦ç”Ÿæˆå’Œç­¾å
- `@octokit/rest` - GitHub API äº¤äº’
- `@actions/github` - GitHub Actions å·¥å…·åŒ…

### å‰ç«¯ï¼ˆå¼€å‘è€…é—¨æˆ·ï¼‰
- Next.js 16 (React 19)
- TypeScript
- `node-forge` - æµè§ˆå™¨ç«¯è¯ä¹¦æ“ä½œ
- Tailwind CSS
- Shadcn UI

## ğŸ“ å˜æ›´å†å²

### v2.0.0 (2025-11-25)
- âœ¨ ä» PGP è¿ç§»åˆ° X.509 PKI æ¶æ„
- âœ¨ å®æ–½ä¸‰çº§ CA ä¿¡ä»»é“¾
- âœ¨ æ·»åŠ åŸºäº GitHub Readme Stats çš„è‡ªåŠ¨å®¡æ ¸æœºåˆ¶
- âœ¨ é‡å†™å‰ç«¯ UI æ”¯æŒ CSR ç”Ÿæˆå’Œè¯ä¹¦éªŒè¯
- ğŸ“ å®Œæ•´é‡å†™è®¾è®¡æ–‡æ¡£å’Œç”¨æˆ·æŒ‡å—

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬ï¼ˆåŸºäº PGP Web-of-Trustï¼‰

---

**ç»´æŠ¤è€…**: KernelSU Core Team
**è®¸å¯è¯**: MIT
**æœ€åæ›´æ–°**: 2025-11-25
