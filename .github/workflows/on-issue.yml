name: "On Issue Opened"
on:
  issues:
    types: [opened, labeled]

permissions:
  contents: write        # 允许提交和推送到仓库
  issues: write          # 允许创建评论和修改 issue

jobs:
  run:
    name: Run Bot
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest

      - name: Install Dependencies
        run: bun install

      - name: Run Bot
        run: bun run index.js
        env:
          REPO_TOKEN: ${{ secrets.REPO_TOKEN }}
          GITHUB_TOKEN: ${{ secrets.REPO_TOKEN }}
          GITHUB_REPOSITORY: ${{ github.repository }}
          MIDDLE_CA_KEY: ${{ secrets.MIDDLE_CA_KEY }}
          MIDDLE_CA_CERT: ${{ secrets.MIDDLE_CA_CERT }}
